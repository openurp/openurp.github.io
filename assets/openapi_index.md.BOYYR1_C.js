import{_ as a,c as i,o as n,ae as t}from"./chunks/framework.DNjB2eFM.js";const E=JSON.parse('{"title":"OpenURP 开放API","description":"","frontmatter":{},"headers":[],"relativePath":"openapi/index.md","filePath":"openapi/index.md"}'),e={name:"openapi/index.md"};function p(l,s,h,o,k,r){return n(),i("div",null,[...s[0]||(s[0]=[t(`<h1 id="openurp-开放api" tabindex="-1">OpenURP 开放API <a class="header-anchor" href="#openurp-开放api" aria-label="Permalink to &quot;OpenURP 开放API&quot;">​</a></h1><p>OpenURP 开放API是将数据通过http的方式提供给外部授信的系统，供其调用，以下说明API的使用方式。 校方部署OpenURP的系统成为本系统，校方授信的其他系统成为第三方系统。学校授信后，本系统运维方需要在后台登记和第三方系统的信息， 主要是用户名、密码和用途、授信起始日期。</p><h3 id="_1-申请api-jwt-token" tabindex="-1">1.申请API JWT Token <a class="header-anchor" href="#_1-申请api-jwt-token" aria-label="Permalink to &quot;1.申请API JWT Token&quot;">​</a></h3><p>开放API是经过http的方式提供的，因此大多采用无状态的方式进行对话，安全上需要建立一定的互信机制。开放API采用<a href="https://www.jwt.io/" target="_blank" rel="noreferrer">JWT</a>的方式，进行交互。 第三方系统需要凭借用户名和密码先向本系统申请JWT Token（一般默认2个小时有效）。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>POST /openapi/oauth/login HTTP/1.1</span></span>
<span class="line"><span>Content-Type: application/json</span></span></code></pre></div><p>请求体中采用Json传递用户名和密码:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;username&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;admin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;password&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;123456&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>系统返回登录结果:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;msg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Login success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;200&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;userName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;某系统&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;userId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;userCode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;admin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;xxxxhead.payload.signaturexxxx&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_2-调用具体的应用api" tabindex="-1">2.调用具体的应用API <a class="header-anchor" href="#_2-调用具体的应用api" aria-label="Permalink to &quot;2.调用具体的应用API&quot;">​</a></h3><p>以成绩查询为例：/openapi/edu/grade/std/user/{学号}.json</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>GET /openapi/edu/grade/std/user/{学号}.json HTTP/1.1</span></span>
<span class="line"><span>Content-Type: application/json</span></span>
<span class="line"><span>Authorization:Bearer {token}</span></span></code></pre></div><p>将{token}更换成上一步获取的token,即可获取内容。一般业务系统返回的json会按照<a href="https://jsonapi.org/" target="_blank" rel="noreferrer">JSON-API</a>的风格提供。</p><h3 id="_3-token的使用" tabindex="-1">3.Token的使用 <a class="header-anchor" href="#_3-token的使用" aria-label="Permalink to &quot;3.Token的使用&quot;">​</a></h3><p>第三方系统需要妥善保管该Token，不得进行传播，如果存在泄露，本系统可以通过日志查询调用明细。 如果不是频繁调用，可以在每次调用的时候重新申请Token。</p>`,15)])])}const u=a(e,[["render",p]]);export{E as __pageData,u as default};
